#!/usr/bin/env sh

# JobBlaster Pre-commit Hook
# Runs code quality checks before allowing commits

echo "ğŸ” Running pre-commit checks..."

# Run lint-staged for automatic fixing and checking
npx lint-staged

# If lint-staged passes, run additional checks
if [ $? -eq 0 ]; then
    echo "âœ… Lint-staged checks passed"
    
    # Run TypeScript type checking
    echo "ğŸ” Checking TypeScript types..."
    npx tsc --noEmit
    
    if [ $? -eq 0 ]; then
        echo "âœ… TypeScript checks passed"
        echo "ğŸ‰ All pre-commit checks passed! Ready to commit."
    else
        echo "âŒ TypeScript check failed"
        echo "Please fix type errors before committing"
        exit 1
    fi
else
    echo "âŒ Lint-staged checks failed"
    echo "Please fix linting/formatting issues before committing"
    exit 1
fi